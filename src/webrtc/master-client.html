<html>
    <head>
        <title>FoxQL</title>
    </head>
    <body>
        <script src = "https://cdn.jsdelivr.net/npm/foxql@latest/build/foxql.min.js"></script>
        <script>
            let client = foxql.client;
            
            client.pushEvents([
                'onSearch',
                'onDocument',
                'onRandom',
                'onDocumentByRef'
            ])

            client.openNativeCollections();

            client.open();

        
            function documentListener(documents)
            {
                const index = client.database.useCollection('entrys');
                documents.forEach(document => {
                    index.addDoc({
                        title : document.title,
                        content : document.content
                    });
                });

                console.log('Document count', index.documentLength)
                
            }


            setInterval(()=>{

                client.randomDocument({
                    limit : 2,
                    collection : 'entrys',
                    timeOut : 1000
                }, documentListener);

            }, 1000 * 9);

            setTimeout(() => {
                window.location.href = window.location.href
            }, ( (1000 * 60) * 60) * 3);
        </script>
        <!-- FoxQL - Client -->
    </body>
</html>